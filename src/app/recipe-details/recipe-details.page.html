<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Full recipe</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="recipe-container">
    <!-- Header with Ionic components -->
    <div class="recipe-header">
      <h1 class="recipe-title">{{ recipe.title }}</h1>
      <p class="recipe-author">{{ currentUser != null ? currentUser.username : ""}}</p>
      <!-- Meta info -->
      <div class="recipe-meta">
        <div class="meta-item">
          <ion-grid>
            <ion-row>
              <ion-col>Ready in</ion-col>
              <ion-col>Difficulty</ion-col>
              <ion-col>Servings</ion-col>
            </ion-row>
            <ion-row>
              <ion-col class="text-italic">{{ recipe.totalTime }} min</ion-col>
              <ion-col class="text-italic">{{ recipe.difficulty }}/5</ion-col>
              <ion-col class="text-italic">{{ recipe.servings }}</ion-col>
            </ion-row>
          </ion-grid>
        </div>
      </div>
    </div>

    <div class="recipe-content-area">

      <img
        alt="Recipe image"
        [src]="recipe.image ? recipe.image : 'https://ionicframework.com/docs/img/demos/card-media.png'"
      />

      <div class="section">
        <h2 class="section-title">Ingredients</h2>
        <div class="ingredients-grid">
          <ion-card class="ingredient-card" *ngFor="let ingredient of recipe.ingredients">
            <ion-card-content>{{ ingredient }}</ion-card-content>
          </ion-card>
        </div>
      </div>

      <div class="section">
        <h2 class="section-title">Directions</h2>
        <ion-card class="directions-card" *ngFor="let step of steps">
          <ion-card-content>{{ step }}</ion-card-content>
        </ion-card>
      </div>

      <ion-row *ngIf="recipe.author === currentUser?.id">
        <ion-col>
          <ion-button expand="block" (click)="editRecipe()" class="create-recipe-button">
            Edit
          </ion-button>
        </ion-col>
        <ion-col>
          <ion-button expand="block" [id]="'delete-' + recipe.id" class="create-recipe-button">
            Delete
          </ion-button>
        </ion-col>
      </ion-row>
      <ion-alert
        [trigger]="'delete-' + recipe.id"
        header="Delete Recipe"
        message="Are you sure you want to delete this recipe? This action cannot be undone."
        [buttons]="alertButtons">
      </ion-alert>
    </div>
  </div>
</ion-content>
